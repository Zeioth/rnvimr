*rnvimr.txt*

Version: 0.1.0
Author : kevinhwang <https://github.com/kevinhwang91>
License: BSD3

================================================================================

CONTENTS                                                *rnvimr-contents*
Introduction                                            |rnvimr-introduction|
Requirements                                            |rnvimr-requirement|
Features                                                |rnvimr-features|
Usage                                                   |rnvimr-usage|
Variables                                               |rnvimr-variables|
Commands                                                |rnvimr-commands|
Examples                                                |rnvimr-config-examples|

================================================================================

INTRODUCTION                                            *rnvimr-introduction*

*Rnvimr* is a Neovim plugin that allows you to use Ranger in a floating window.

Different than other Ranger vim-plugins, Rnvimr gives you full control over
Ranger. It uses RPC to communicate with Ranger.

Since Rnvimr requires RPC, this plugin does not support vim for now.

================================================================================

REQUIREMENTS                                            *rnvimr-requirements*

1. *Ranger* (https://github.com/ranger/ranger)
2. *Pynvim* (https://github.com/neovim/pynvim)
3. Python3
4. *Ueberzug* (https://github.com/seebye/ueberzug) (optional)

================================================================================

FEATURES                                                *rnvimr-features*

- Replace builtin Netrw to be a file explorer
- Calibrate preview images for ueberzug
- Attach file automatically when toggling Ranger.
- Run RPC inside Ranger to communicate with NeoVim
- Adjust floating window after resizing window of NeoVim
- Fully customizable layouts for floating window
- Better experience for Pager view in Ranger
- Automatically wipe the buffers corresponding to the files deleted by Ranger

================================================================================

USAGE                                                   *rnvimr-usage*

Use |:RnvimrToggle| to create a Ranger process, and if one exists,
|:RnvimrToggle| simply shows or hides the floating window.

Use |:RnvimrResize| to cycle the preset layouts.

|:RnvimrSync| will synchronize your personal Ranger configuration and plugins
with Rnvimr this time.

`Enter` to open a file in Ranger. Rnvimr also supports `CTRL-T/CTRL-X/CTRL-V`
key bindings to open in a new tab, a new split, or in a new vertical split.

Pressing `q` in Ranger just hide floating window. Ranger will attach file of
the current buffer in the next toggle event.

================================================================================

VARIABLES                                               *rnvimr-variables*
                                                        *g:rnvimr_layout*
g:rnvimr_layout
    Default: {dict}
>
            { 'relative': 'editor',
            \ 'width': float2nr(round(0.6 * &columns)),
            \ 'height': float2nr(round(0.6 * &lines)),
            \ 'col': float2nr(round(0.2 * &columns)),
            \ 'row': float2nr(round(0.2 * &lines)),
            \ 'style': 'minimal' }
<
    The dict is a parameter of *nvim_open_win* api named {config}.

                                                        *g:rnvimr_presets*
g:rnvimr_presets
    Default: {list}
>
            [ {},
            \ {'width': 0.700, 'height': 0.700},
            \ {'width': 0.800, 'height': 0.800},
            \ {'width': 0.950, 'height': 0.950} ]
<
    The element of list is {dict}, represents the layout of floating window.

    If the type of values of 'width', 'height', 'col', 'row' are {number}, the
    values are the final result of the layout, such as `{'width': 10}`, the
    width of floating window is 10.

    If the type of values of 'width', 'height', 'col', 'row' are {float}, its
    value must be {0.0-1.0}. It represents the proportion of the columns or
    lines of NeoVim.
    The values of 'width' and 'col' are the proportion of |&columns|.
    The values of 'height' and 'row' are the proportion of |&lines|.

    If 'col' is missing but dict contains 'width' k&v, 'col' will be calculated
    by format `float2nr(round((&columns - width) / 2))`, 'row' is similar to
    'col'.

    If the other k&v are missing, it will extend from the |g:rnvimr_layout|.

    If the element is an empty dict '{}', it represents the initial element of
    |g:rnvimr_presets| while running |:RnvimrToggle|.

                                                        *g:rnvimr_split_action*
g:rnvimr_split_action
    Default: {dict}
>
           { '<C-t>': 'tabedit', '<C-x>': 'split', '<C-v>': 'vsplit' }
<
    Split action for selected file in Ranger. Disable it by using empty dict.
    The keymap should follow Ranger's format.

                                                        *g:rnvimr_ex_enable*
g:rnvimr_ex_enable
    Default: 0

    Enable Ranger to replace builtin Netrw to be a file explorer

                                                        *g:rnvimr_pick_enable*
g:rnvimr_pick_enable
    Default: 0

    Enable Ranger to be hidden after picking a file.
    It will automatically attach file in next |:RnvimrToggle|.

                                                        *g:rnvimr_bw_enable*
g:rnvimr_bw_enable
    Default: 0

    Enable Neovim to synchronize the buffers with the deleted files by Ranger
    It will automatically make Neovim to execute |bwipeout| to wipe the buffers
    corresponding to the files that has been deleted by Ranger.

                                                        *g:rnvimr_draw_border*
g:rnvimr_draw_border
    Default: 1

    Using builtin curses in Ranger to draw a border for floating window.  >
    autocmd FileType rnvimr set winhighlight=NormalFloat:highlight-groups
<    will replace with the default value {winhighlight=NormalFloat:Normal} in
    curses environment. Outside the curses environment such as entering $SHELL,
    the NormalFloat's valuse of winhighlight is always {NormalFloat}.

                                                        *g:rnvimr_ranger_cmd*
g:rnvimr_ranger_cmd
    Default: 'ranger'

    Use this command to run a process inside the floating window.
    It can mix some command of Ranger, such as 'ranger --cmd="xxx"'.

                                                        *g:rnvimr_sync_path*
g:rnvimr_sync_path
    Default: Default path of Ranger's configuration, depend on *$HOME* and
    *$XDG_CONFIG_HOME* environment.

    No need to set this variable while using default configuration and path.
    If you want to extend plugin of Rnvimr, you will set this variable to
    isolate the configuration of Ranger and Rnvimr.

================================================================================

COMMANDS                                                *rnvimr-commands*

                                                        *:RnvimrToggle*
:RnvimrToggle
    Toggle the Ranger floating window. Reopen Ranger and attach file
    automatically after executing Ranger's command |quit| with only 1 tab.
    If run |quit| inside Ranger, Ranger is hidden by closing floating window
    instead of exiting process. You can run |quit!| or |quitall| command to exit
    Ranger process.

                                                        *:RnvimrResize*
:RnvimrResize {args}
    Resize floating window by preset layouts. If {args} is empty, it will
    circularly iterate the total |g:rnvimr_presets|. If {args} is single index
    or multiple indexes separate by {,} such as {4,2,1,3}, it will circularly
    iterate special elements of |g:rnvimr_presets| in order via index.

                                                        *:RnvimrSync*
:RnvimrSync
    Synchronize all configuration and plugins of Ranger with Rnvimr.

================================================================================

EXAMPLES                                                *rnvimr-config-examples*

Minimal configuration:
>
    Plug 'kevinhwang91/rnvimr', {'do': 'make install'}

    tnoremap <silent> <M-i> <C-\><C-n>:RnvimrResize<CR>
    nnoremap <silent> <M-o> :RnvimrToggle<CR>
    tnoremap <silent> <M-o> <C-\><C-n>:RnvimrToggle<CR>
<

Advanced configuration:
>
    " Synchronize all Ranger's configuration and plugins with Rnvimr
    Plug 'kevinhwang91/rnvimr', {'do': 'make sync'}

    " Make Ranger to replace netrw to be a file explorer
    let g:rnvimr_ex_enable = 1

    " Make Ranger to be hidden after picking a file
    let g:rnvimr_pick_enable = 1

    " Disable a border for floating window
    let g:rnvimr_draw_border = 0

    " Make Neovim to wipe the buffers corresponding to the files deleted by
    " Ranger
    let g:rnvimr_bw_enable = 1

    " Set up only two columns in miller mode and draw border with separators
    let g:rnvimr_ranger_cmd = 'ranger --cmd="set column_ratios 1,1"
                \ --cmd="set draw_borders separators"'

    " highlight text in Floating window
    highlight NormalFloat ctermfg=0 ctermbg=16 guibg=#2b3038

    nnoremap <silent> <M-o> :RnvimrToggle<CR>
    tnoremap <silent> <M-o> <C-\><C-n>:RnvimrToggle<CR>

    " Resize floating window by all preset layouts
    tnoremap <silent> <M-i> <C-\><C-n>:RnvimrResize<CR>

    " Resize floating window by special preset layouts
    tnoremap <silent> <M-l> <C-\><C-n>:RnvimrResize 1,8,9,11,5<CR>

    " Resize floating window by single preset layout
    tnoremap <silent> <M-y> <C-\><C-n>:RnvimrResize 6<CR>

    " Customize initial layout
    let g:rnvimr_layout = { 'relative': 'editor',
                \ 'width': float2nr(round(0.6 * &columns)),
                \ 'height': float2nr(round(0.6 * &lines)),
                \ 'col': float2nr(round(0.2 * &columns)),
                \ 'row': float2nr(round(0.2 * &lines)),
                \ 'style': 'minimal' }

    " Customize multiple preset layouts
    " '{}' represents initial layout
    let g:rnvimr_presets = [
                \ {},
                \ {'width': 0.700, 'height': 0.700},
                \ {'width': 0.800, 'height': 0.800},
                \ {'width': 0.950, 'height': 0.950}
                \ {'width': 0.500, 'height': 0.500, 'col': 0, 'row': 0},
                \ {'width': 0.500, 'height': 0.500, 'col': 0, 'row': 0.5},
                \ {'width': 0.500, 'height': 0.500, 'col': 0.5, 'row': 0},
                \ {'width': 0.500, 'height': 0.500, 'col': 0.5, 'row': 0.5},
                \ {'width': 0.500, 'height': 1.000, 'col': 0, 'row': 0},
                \ {'width': 0.500, 'height': 1.000, 'col': 0.5, 'row': 0},
                \ {'width': 1.000, 'height': 0.500, 'col': 0, 'row': 0},
                \ {'width': 1.000, 'height': 0.500, 'col': 0, 'row': 0.5}]
<
================================================================================
vim:tw=80:ft=help
